{"version":3,"file":"post-media-player-block/view.js","mappings":"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","sources":["webpack://ncmaz-fse-core/./src/post-media-player-block/utils.ts","webpack://ncmaz-fse-core/external module \"@wordpress/interactivity\"","webpack://ncmaz-fse-core/webpack/bootstrap","webpack://ncmaz-fse-core/webpack/runtime/define property getters","webpack://ncmaz-fse-core/webpack/runtime/hasOwnProperty shorthand","webpack://ncmaz-fse-core/webpack/runtime/make namespace object","webpack://ncmaz-fse-core/./src/post-media-player-block/view.ts"],"sourcesContent":["export function parseTime(seconds: number) {\n\tlet hours = Math.floor(seconds / 3600);\n\tlet minutes = Math.floor((seconds - hours * 3600) / 60);\n\tseconds = seconds - hours * 3600 - minutes * 60;\n\treturn [hours, minutes, seconds];\n}\n\nexport function formatTime(seconds: Array<number>, totalSeconds = seconds) {\n\tlet totalWithoutLeadingZeroes = totalSeconds.slice(\n\t\ttotalSeconds.findIndex((x) => x !== 0),\n\t);\n\treturn seconds\n\t\t.slice(seconds.length - totalWithoutLeadingZeroes.length)\n\t\t.map((x) => x.toString().padStart(2, \"0\"))\n\t\t.join(\":\");\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from \"@wordpress/interactivity\";\nimport { formatTime, parseTime } from \"./utils\";\n\ninterface TPost {\n\tid: number;\n\ttitle: string;\n\thref: string;\n\tmedia?: {\n\t\t// src?: string;\n\t\turls?: {\n\t\t\t// iframe\n\t\t\tmedia_url_iframe: string;\n\t\t\t// Audio\n\t\t\taudio_url_mp3: string;\n\t\t\taudio_url_ogg: string;\n\t\t\taudio_url_wav: string;\n\t\t\taudio_url_aac: string;\n\t\t\taudio_url_webm: string;\n\t\t\t// Video\n\t\t\tvideo_url_mp4: string;\n\t\t\tvideo_url_webm: string;\n\t\t\tvideo_url_ogv: string;\n\t\t};\n\t\ttype?: string;\n\t};\n\tauthor?: {\n\t\tname: string;\n\t\thref: string;\n\t};\n\tiframe_init_url?: string | null;\n}\n\n// view.js\ninterface TContext {\n\tepisodeContext?: null | TPost;\n}\n\ninterface TState {\n\tplayerRef: HTMLAudioElement | null;\n\tsliderRef: HTMLInputElement | null;\n\tcurrentPlayingId: null | number;\n\t//  Audio player state\n\tplaying: boolean;\n\tmuted: boolean;\n\tduration: number;\n\tcurrentTime: number;\n\tinitEpisode: null | TPost;\n\taudioEpisode: null | TPost;\n\tvideoEpisode: null | TPost;\n\tiframeEpisode: null | TPost;\n\tplaybackRate: number;\n\tisPlaybackRate1x: boolean;\n\tisPlaybackRate1_5x: boolean;\n\tisPlaybackRate2x: boolean;\n\t// Audio player - slider\n\tplayedWidth: string;\n\tthumbLeft: string;\n\tcurrentTimeHuman: string;\n\tdurationHuman: string;\n\taudioErrorMess: string;\n\taudioHasError: boolean;\n\t// other player state\n\tvideoPlaying: boolean;\n\tvideoMuted?: boolean;\n\tvideoVolume?: number;\n\tvideoCurrentTime?: number;\n\tvideoPlaybackRate?: number;\n\t//\n\tiframePlaying: boolean;\n\t// other player state\n\tvideoPlayerRef: HTMLVideoElement | null;\n\tisShowAudioPlayer: boolean;\n\tisShowVideoPlayer: boolean;\n\tisShowIframeInvalidUrl: boolean;\n\t//\n\tmediaIsVideo: boolean;\n\tmediaIsIframe: boolean;\n\tmediaIsAudio: boolean;\n\t//\n\tisCurrentPostPlaying: boolean;\n\t//\n\tisVideoVerticalRatio: boolean;\n\tvideoRatio: string;\n}\n\ntype TStateLocalStorage = Pick<\n\tTState,\n\t| \"initEpisode\"\n\t| \"muted\"\n\t| \"duration\"\n\t| \"currentTime\"\n\t| \"playbackRate\"\n\t| \"isShowAudioPlayer\"\n\t| \"isShowVideoPlayer\"\n\t| \"currentPlayingId\"\n\t| \"videoCurrentTime\"\n\t| \"videoPlaybackRate\"\n\t| \"videoVolume\"\n\t| \"videoMuted\"\n>;\n\nconst { state, actions } = store(\"ncmfse/post-media-player-block\", {\n\tstate: {\n\t\tget audioEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"AUDIO\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\tget videoEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"VIDEO\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\tget iframeEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"IFRAME\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\tget isShowIframeInvalidUrl() {\n\t\t\treturn (\n\t\t\t\tstate.initEpisode?.media?.type === \"IFRAME\" &&\n\t\t\t\tstate.initEpisode?.media?.urls?.media_url_iframe ===\n\t\t\t\t\t\"iframe_url_invalid\"\n\t\t\t);\n\t\t},\n\t\t// Media type\n\t\tget mediaIsIframe() {\n\t\t\treturn state.initEpisode?.media?.type === \"IFRAME\";\n\t\t},\n\t\tget mediaIsVideo() {\n\t\t\treturn state.initEpisode?.media?.type === \"VIDEO\";\n\t\t},\n\t\tget mediaIsAudio() {\n\t\t\treturn state.initEpisode?.media?.type === \"AUDIO\";\n\t\t},\n\t\t// Audio player state\n\t\tget playedWidth() {\n\t\t\treturn `calc(${(state.currentTime / state.duration) * 100}% -  0.25rem)`;\n\t\t},\n\t\tget thumbLeft() {\n\t\t\treturn `calc(${(state.currentTime / state.duration) * 100}%)`;\n\t\t},\n\t\tget currentTimeHuman() {\n\t\t\treturn formatTime(\n\t\t\t\tparseTime(state.currentTime),\n\t\t\t\tparseTime(state.duration),\n\t\t\t);\n\t\t},\n\t\tget durationHuman() {\n\t\t\treturn formatTime(parseTime(state.duration));\n\t\t},\n\t\tget isPlaybackRate1x() {\n\t\t\treturn state.playbackRate === 1;\n\t\t},\n\t\tget isPlaybackRate1_5x() {\n\t\t\treturn state.playbackRate === 1.5;\n\t\t},\n\t\tget isPlaybackRate2x() {\n\t\t\treturn state.playbackRate === 2;\n\t\t},\n\t\t//\n\t\tget isCurrentPostPlaying() {\n\t\t\tconst context = getContext<TContext>();\n\t\t\tif (context.episodeContext?.id === state.currentPlayingId) {\n\t\t\t\tif (state.initEpisode?.media?.type === \"AUDIO\") {\n\t\t\t\t\treturn state.playing;\n\t\t\t\t}\n\t\t\t\tif (state.initEpisode?.media?.type === \"VIDEO\") {\n\t\t\t\t\treturn state.videoPlaying;\n\t\t\t\t}\n\t\t\t\tif (state.initEpisode?.media?.type === \"IFRAME\") {\n\t\t\t\t\treturn state.iframePlaying;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tget isVideoVerticalRatio() {\n\t\t\t// if the video ratio is 9-16 or the video is an iframe youtube short video\n\t\t\treturn (\n\t\t\t\tstate.videoRatio === \"9-16\" ||\n\t\t\t\t(state.videoRatio === \"auto\" &&\n\t\t\t\t\tstate.initEpisode?.iframe_init_url?.includes(\"youtube.com/shorts\"))\n\t\t\t);\n\t\t},\n\t} as TState,\n\tactions: {\n\t\t// audio player dispatchers\n\t\tdispatchPlay() {\n\t\t\tstate.playing = true;\n\t\t},\n\t\tdispatchPause() {\n\t\t\tstate.playing = false;\n\t\t},\n\t\tdispatchDurationChange() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.duration = Math.floor(playerRef?.duration || 0);\n\t\t},\n\t\tdispatchCurrentTimeChange() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.currentTime = Math.floor(playerRef?.currentTime || 0);\n\t\t},\n\t\tdispatchAudioError(event: OnErrorEventHandler) {\n\t\t\t// @ts-ignore\n\t\t\tif (!event?.target?.getAttribute(\"src\")) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstate.audioHasError = true;\n\t\t\tstate.audioErrorMess = \"An error occurred while loading the audio.\";\n\t\t},\n\n\t\t// Audio player actions\n\t\tplay() {\n\t\t\tconst { audioEpisode, playerRef, currentPlayingId } = state;\n\n\t\t\tif (audioEpisode) {\n\t\t\t\tstate.playing = true;\n\t\t\t\tif (playerRef && currentPlayingId !== audioEpisode?.id) {\n\t\t\t\t\tlet playbackRate = playerRef.playbackRate;\n\t\t\t\t\tplayerRef.load();\n\t\t\t\t\tplayerRef.pause();\n\t\t\t\t\tplayerRef.playbackRate = playbackRate;\n\t\t\t\t\tplayerRef.currentTime = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.isShowAudioPlayer = true;\n\t\t\tstate.isShowVideoPlayer = false;\n\t\t\tconst playPromise = playerRef?.play();\n\n\t\t\tif (playPromise !== undefined) {\n\t\t\t\tplayPromise\n\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t// Automatic playback started!\n\t\t\t\t\t\tstate.audioHasError = false;\n\t\t\t\t\t\tstate.audioErrorMess = \"\";\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (error) {\n\t\t\t\t\t\t// Automatic playback failed.\n\t\t\t\t\t\tstate.audioErrorMess = error.message;\n\t\t\t\t\t\tstate.audioHasError = true;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t// add currentPlayingId\n\t\t\tstate.currentPlayingId = audioEpisode?.id || null;\n\t\t},\n\t\tpause() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.pause();\n\t\t},\n\t\ttoggle() {\n\t\t\tactions.isPlaying() ? actions.pause() : actions.play();\n\t\t},\n\t\ttoggleMute() {\n\t\t\tstate.muted = !state.muted;\n\t\t},\n\t\tisPlaying() {\n\t\t\tconst { playerRef, audioEpisode, currentPlayingId } = state;\n\t\t\treturn audioEpisode\n\t\t\t\t? state.playing &&\n\t\t\t\t\t\tplayerRef?.currentSrc &&\n\t\t\t\t\t\tcurrentPlayingId === audioEpisode?.id\n\t\t\t\t: false;\n\t\t},\n\t\trewind10s() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\t\t\tplayerRef.currentTime += -10;\n\t\t},\n\t\tforward10s() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\t\t\tplayerRef.currentTime += 10;\n\t\t},\n\t\ttogglePlaybackRate() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\n\t\t\tif (state.playbackRate === 1) {\n\t\t\t\tstate.playbackRate = 1.5;\n\t\t\t} else if (state.playbackRate === 1.5) {\n\t\t\t\tstate.playbackRate = 2;\n\t\t\t} else {\n\t\t\t\tstate.playbackRate = 1;\n\t\t\t}\n\t\t\tplayerRef.playbackRate = state.playbackRate;\n\t\t},\n\t\tforceEnd() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.currentPlayingId = null;\n\t\t\tstate.initEpisode = null;\n\t\t\tstate.playing = false;\n\t\t\tstate.audioErrorMess = \"\";\n\t\t\tstate.audioHasError = false;\n\n\t\t\tif (playerRef) {\n\t\t\t\tplayerRef.currentTime = 0;\n\t\t\t\tplayerRef.pause();\n\t\t\t}\n\t\t},\n\n\t\t// Audio player - slider\n\t\thandleSeekMouseDown() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.pause();\n\t\t},\n\t\thandleSeekChange() {\n\t\t\tconst { playerRef, sliderRef } = state;\n\t\t\tif (!playerRef?.currentSrc || !sliderRef) return;\n\t\t\tconst currentTime = playerRef.duration * parseFloat(sliderRef.value);\n\t\t\t// update the state current time\n\t\t\tstate.currentTime = Math.floor(currentTime);\n\t\t\t// Update the player's current time\n\t\t\tplayerRef.currentTime = Math.floor(currentTime);\n\t\t},\n\t\thandleSeekMouseUp() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.play();\n\t\t},\n\n\t\t// Video <video> player actions\n\t\tdispatchVideoPlay() {\n\t\t\tstate.videoPlaying = true;\n\t\t},\n\t\tdispatchVideoPause() {\n\t\t\tstate.videoPlaying = false;\n\t\t},\n\t\tdispatchVideoCurrentTimeChange() {\n\t\t\tconst { videoPlayerRef } = state;\n\t\t\tstate.videoCurrentTime = Math.floor(videoPlayerRef?.currentTime || 0);\n\t\t},\n\t\tdispatchVideoVolumeChange() {\n\t\t\tconst { videoPlayerRef } = state;\n\t\t\tstate.videoMuted = videoPlayerRef?.muted;\n\t\t\tstate.videoVolume = videoPlayerRef?.volume;\n\t\t},\n\t\tdispatchVideoPlaybackRateChange() {\n\t\t\tconst { videoPlayerRef } = state;\n\t\t\tstate.videoPlaybackRate = videoPlayerRef?.playbackRate;\n\t\t},\n\n\t\tvideoPlay() {\n\t\t\tconst { videoEpisode, videoPlayerRef, currentPlayingId } = state;\n\t\t\tif (videoEpisode) {\n\t\t\t\tif (videoPlayerRef && currentPlayingId !== videoEpisode?.id) {\n\t\t\t\t\tvideoPlayerRef.load();\n\t\t\t\t\tvideoPlayerRef.pause();\n\t\t\t\t\tvideoPlayerRef.playbackRate = 1;\n\t\t\t\t\tvideoPlayerRef.currentTime = 0;\n\t\t\t\t\tvideoPlayerRef.volume = 1;\n\t\t\t\t\tvideoPlayerRef.muted = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.videoPlaying = true;\n\t\t\tstate.isShowVideoPlayer = true;\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tvideoPlayerRef?.play();\n\t\t\t// add currentPlayingId\n\t\t\tstate.currentPlayingId = videoEpisode?.id || null;\n\t\t},\n\t\tvideoPause() {\n\t\t\tconst { videoPlayerRef } = state;\n\t\t\tvideoPlayerRef?.pause();\n\t\t},\n\t\tvideoToggle() {\n\t\t\tactions.isVideoPlaying() ? actions.videoPause() : actions.videoPlay();\n\t\t},\n\t\tisVideoPlaying() {\n\t\t\tconst { videoPlayerRef, videoEpisode, currentPlayingId } = state;\n\t\t\treturn videoEpisode\n\t\t\t\t? state.videoPlaying &&\n\t\t\t\t\t\tvideoPlayerRef?.currentSrc &&\n\t\t\t\t\t\tcurrentPlayingId === videoEpisode?.id\n\t\t\t\t: false;\n\t\t},\n\t\tforceVideoEnd() {\n\t\t\tstate.initEpisode = null;\n\t\t\tstate.videoPlaying = false;\n\t\t\tstate.currentPlayingId = null;\n\t\t\tif (state.videoPlayerRef) {\n\t\t\t\tstate.videoPlayerRef.currentTime = 0;\n\t\t\t\tstate.videoPlayerRef.pause();\n\t\t\t}\n\t\t},\n\n\t\t// Video Iframe <iframe> player actions\n\t\tvideoIframePlay() {\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tstate.isShowVideoPlayer = true;\n\t\t\tstate.iframePlaying = true;\n\t\t\tstate.currentPlayingId = state.initEpisode?.id || null;\n\t\t},\n\t\tforceVideoIframeEnd() {\n\t\t\tstate.initEpisode = null;\n\t\t\tstate.iframePlaying = false;\n\t\t\tstate.currentPlayingId = null;\n\t\t},\n\n\t\t// other player actions ---\n\t\thandleClickPostMediaPlayBtn() {\n\t\t\tconst context = getContext<TContext>();\n\t\t\t// console.log(\"click - episodeContext\", context.episodeContext);\n\n\t\t\t// check if urls is empty\n\t\t\tif (\n\t\t\t\tObject.values(context.episodeContext?.media?.urls || {}).every(\n\t\t\t\t\t(x) => !x,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tconsole.log(\"urls is empty\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (context.episodeContext?.id === state.currentPlayingId) {\n\t\t\t\t// if the same episode, toggle the player\n\t\t\t\tif (state.mediaIsVideo) {\n\t\t\t\t\tactions.videoToggle();\n\t\t\t\t} else if (state.mediaIsIframe) {\n\t\t\t\t\tactions.videoIframePlay();\n\t\t\t\t} else if (state.mediaIsAudio) {\n\t\t\t\t\tactions.toggle();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//\n\t\t\tactions.forceEnd();\n\t\t\tactions.forceVideoEnd();\n\t\t\tactions.forceVideoIframeEnd();\n\t\t\t//\n\t\t\tstate.initEpisode = context.episodeContext || null;\n\t\t\t//\n\t\t\tconst mediaType = context.episodeContext?.media?.type;\n\n\t\t\t// play audio <audio>\n\t\t\tif (mediaType === \"AUDIO\") {\n\t\t\t\tactions.play();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// play video <video>\n\t\t\tif (mediaType === \"VIDEO\") {\n\t\t\t\tactions.videoPlay();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// play video Iframe <iframe>\n\t\t\tif (mediaType === \"IFRAME\") {\n\t\t\t\tactions.videoIframePlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\thandleCloseAllPlayer() {\n\t\t\tactions.forceEnd();\n\t\t\tactions.forceVideoEnd();\n\t\t\tactions.forceVideoIframeEnd();\n\t\t\t//\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tstate.isShowVideoPlayer = false;\n\n\t\t\t// reset the audio player state\n\t\t\tstate.duration = 0;\n\t\t\tstate.currentTime = 0;\n\t\t\tstate.muted = false;\n\t\t\tstate.playbackRate = 1;\n\t\t\t// reset the video player state\n\t\t\tstate.videoCurrentTime = 0;\n\t\t\tstate.videoMuted = false;\n\t\t\tstate.videoVolume = 1;\n\t\t\tstate.videoPlaybackRate = 1;\n\t\t},\n\t},\n\tcallbacks: {\n\t\tonInit: () => {\n\t\t\tconst { ref } = getElement();\n\t\t\tstate.playerRef = ref?.querySelector(\n\t\t\t\t\"audio#ncmazfse-media-player-audio\",\n\t\t\t) as HTMLAudioElement;\n\t\t\tstate.sliderRef = ref?.querySelector(\n\t\t\t\t\"input#ncmazfse-media-player-audio-slider-input\",\n\t\t\t) as HTMLInputElement;\n\t\t\tstate.videoPlayerRef = ref?.querySelector(\n\t\t\t\t\"video#ncmazfse-media-player-video\",\n\t\t\t) as HTMLVideoElement;\n\n\t\t\t// update state from the local storage\n\t\t\tconst localStorageState = JSON.parse(\n\t\t\t\tlocalStorage.getItem(\"ncmazfse_media_player_current_state\") || \"{}\",\n\t\t\t) as Partial<TStateLocalStorage>;\n\n\t\t\tif (localStorageState?.initEpisode?.id) {\n\t\t\t\tstate.initEpisode = localStorageState.initEpisode;\n\t\t\t\tstate.isShowAudioPlayer = !!localStorageState.isShowAudioPlayer;\n\t\t\t\tstate.isShowVideoPlayer = !!localStorageState.isShowVideoPlayer;\n\t\t\t\tstate.currentPlayingId = localStorageState.currentPlayingId || null;\n\n\t\t\t\t// update audio player state\n\t\t\t\tif (\n\t\t\t\t\tlocalStorageState.initEpisode?.media?.type === \"AUDIO\" &&\n\t\t\t\t\tstate.playerRef\n\t\t\t\t) {\n\t\t\t\t\tstate.muted = !!localStorageState.muted;\n\t\t\t\t\t// state.duration = localStorageState.duration;\n\t\t\t\t\t// state.currentTime = localStorageState.currentTime;\n\t\t\t\t\tstate.playbackRate = localStorageState.playbackRate || 1;\n\t\t\t\t\t// load and seek the audio player to the last time\n\t\t\t\t\tstate.playerRef.load();\n\t\t\t\t\tstate.playerRef.currentTime = localStorageState.currentTime || 0;\n\t\t\t\t\tstate.playerRef.playbackRate = localStorageState.playbackRate || 1;\n\t\t\t\t\tstate.playerRef.muted = !!localStorageState.muted;\n\t\t\t\t} else if (\n\t\t\t\t\tlocalStorageState.initEpisode?.media?.type === \"VIDEO\" &&\n\t\t\t\t\tstate.videoPlayerRef\n\t\t\t\t) {\n\t\t\t\t\t// load video player and seek to the last time\n\t\t\t\t\tstate.videoPlayerRef.load();\n\t\t\t\t\tstate.videoPlayerRef.currentTime =\n\t\t\t\t\t\tlocalStorageState.videoCurrentTime || 0;\n\t\t\t\t\tstate.videoPlayerRef.playbackRate =\n\t\t\t\t\t\tlocalStorageState.videoPlaybackRate || 1;\n\t\t\t\t\tstate.videoPlayerRef.muted = !!localStorageState.videoMuted;\n\t\t\t\t\tstate.videoPlayerRef.volume = localStorageState.videoVolume || 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// catch when window is beforeunload to save the current state\n\t\t\twindow.addEventListener(\"beforeunload\", () => {\n\t\t\t\tconst stateToSave: TStateLocalStorage = {\n\t\t\t\t\tinitEpisode: state.initEpisode,\n\t\t\t\t\tmuted: state.muted,\n\t\t\t\t\tduration: state.duration,\n\t\t\t\t\tcurrentTime: state.currentTime,\n\t\t\t\t\tplaybackRate: state.playbackRate,\n\t\t\t\t\tvideoCurrentTime: state.videoCurrentTime,\n\t\t\t\t\tvideoMuted: state.videoMuted,\n\t\t\t\t\tvideoVolume: state.videoVolume,\n\t\t\t\t\tvideoPlaybackRate: state.videoPlaybackRate,\n\t\t\t\t\tisShowAudioPlayer: state.isShowAudioPlayer,\n\t\t\t\t\tisShowVideoPlayer: state.isShowVideoPlayer,\n\t\t\t\t\tcurrentPlayingId: state.currentPlayingId,\n\t\t\t\t};\n\n\t\t\t\tif (state.initEpisode?.media?.type === \"IFRAME\") {\n\t\t\t\t\tstateToSave.currentPlayingId = null;\n\t\t\t\t\tif (state.initEpisode?.media?.urls?.media_url_iframe) {\n\t\t\t\t\t\t// remove the autoplay=1 and auto_play=1 from the url\n\t\t\t\t\t\tconst newUrl = new URL(\n\t\t\t\t\t\t\tstate.initEpisode?.media?.urls?.media_url_iframe,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnewUrl.searchParams.delete(\"autoplay\");\n\t\t\t\t\t\tnewUrl.searchParams.delete(\"auto_play\");\n\n\t\t\t\t\t\tstateToSave.initEpisode = {\n\t\t\t\t\t\t\t...state.initEpisode,\n\t\t\t\t\t\t\tmedia: {\n\t\t\t\t\t\t\t\t...state.initEpisode.media,\n\t\t\t\t\t\t\t\turls: {\n\t\t\t\t\t\t\t\t\t...(state.initEpisode.media.urls || {}),\n\t\t\t\t\t\t\t\t\tmedia_url_iframe: newUrl.toString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"ncmazfse_media_player_current_state\",\n\t\t\t\t\tJSON.stringify(stateToSave),\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t},\n});\n"],"names":["parseTime","seconds","hours","Math","floor","minutes","formatTime","totalSeconds","totalWithoutLeadingZeroes","slice","findIndex","x","length","map","toString","padStart","join","store","getContext","getElement","state","actions","audioEpisode","initEpisode","media","type","videoEpisode","iframeEpisode","isShowIframeInvalidUrl","urls","media_url_iframe","mediaIsIframe","mediaIsVideo","mediaIsAudio","playedWidth","currentTime","duration","thumbLeft","currentTimeHuman","durationHuman","isPlaybackRate1x","playbackRate","isPlaybackRate1_5x","isPlaybackRate2x","isCurrentPostPlaying","context","episodeContext","id","currentPlayingId","playing","videoPlaying","iframePlaying","isVideoVerticalRatio","videoRatio","iframe_init_url","includes","dispatchPlay","dispatchPause","dispatchDurationChange","playerRef","dispatchCurrentTimeChange","dispatchAudioError","event","target","getAttribute","audioHasError","audioErrorMess","play","load","pause","isShowAudioPlayer","isShowVideoPlayer","playPromise","undefined","then","catch","error","message","toggle","isPlaying","toggleMute","muted","currentSrc","rewind10s","forward10s","togglePlaybackRate","forceEnd","handleSeekMouseDown","handleSeekChange","sliderRef","parseFloat","value","handleSeekMouseUp","dispatchVideoPlay","dispatchVideoPause","dispatchVideoCurrentTimeChange","videoPlayerRef","videoCurrentTime","dispatchVideoVolumeChange","videoMuted","videoVolume","volume","dispatchVideoPlaybackRateChange","videoPlaybackRate","videoPlay","videoPause","videoToggle","isVideoPlaying","forceVideoEnd","videoIframePlay","forceVideoIframeEnd","handleClickPostMediaPlayBtn","Object","values","every","console","log","mediaType","handleCloseAllPlayer","callbacks","onInit","ref","querySelector","localStorageState","JSON","parse","localStorage","getItem","window","addEventListener","stateToSave","newUrl","URL","searchParams","delete","setItem","stringify"],"sourceRoot":""}
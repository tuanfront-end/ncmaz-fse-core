{"version":3,"file":"post-media-player-block/view.js","mappings":"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","sources":["webpack://ncmaz-fse-core/external module \"@wordpress/interactivity\"","webpack://ncmaz-fse-core/webpack/bootstrap","webpack://ncmaz-fse-core/webpack/runtime/make namespace object","webpack://ncmaz-fse-core/./src/post-media-player-block/view.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from \"@wordpress/interactivity\";\n\ninterface TPost {\n\tid: number;\n\ttitle: string;\n\thref: string;\n\tmedia?: {\n\t\t// src?: string;\n\t\turls?: {\n\t\t\t// iframe\n\t\t\tmedia_url_iframe: string;\n\t\t\t// Audio\n\t\t\taudio_url_mp3: string;\n\t\t\taudio_url_ogg: string;\n\t\t\taudio_url_wav: string;\n\t\t\taudio_url_aac: string;\n\t\t\taudio_url_webm: string;\n\t\t\t// Video\n\t\t\tvideo_url_mp4: string;\n\t\t\tvideo_url_webm: string;\n\t\t\tvideo_url_ogv: string;\n\t\t};\n\t\ttype?: string;\n\t};\n\tauthor?: {\n\t\tname: string;\n\t\thref: string;\n\t};\n}\n\n// view.js\ninterface TContext {\n\tepisodeContext?: null | TPost;\n}\n\ninterface TState {\n\tplayerRef: HTMLAudioElement | null;\n\tsliderRef: HTMLInputElement | null;\n\t//  Audio player state\n\tplaying: boolean;\n\tmuted: boolean;\n\tduration: number;\n\tcurrentTime: number;\n\tinitEpisode: null | TPost;\n\taudioEpisode: null | TPost;\n\tvideoEpisode: null | TPost;\n\tiframeEpisode: null | TPost;\n\tplaybackRate: number;\n\tisPlaybackRate1x: boolean;\n\tisPlaybackRate1_5x: boolean;\n\tisPlaybackRate2x: boolean;\n\t// Audio player - slider\n\tplayedWidth: string;\n\tthumbLeft: string;\n\tcurrentTimeHuman: string;\n\tdurationHuman: string;\n\t// other player state\n\tvideoPlayerRef: HTMLVideoElement | null;\n\tisShowAudioPlayer: boolean;\n\tisShowVideoPlayer: boolean;\n\t//\n\tmediaIsVideo: boolean;\n\tmediaIsIframe: boolean;\n\tmediaIsAudio: boolean;\n}\n\nconst { state, actions } = store(\"ncmfse/post-media-player-block\", {\n\tstate: {\n\t\tget audioEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"AUDIO\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\tget videoEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"VIDEO\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\tget iframeEpisode() {\n\t\t\tif (state.initEpisode?.media?.type !== \"IFRAME\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn state.initEpisode;\n\t\t},\n\t\t// Media type\n\t\tget mediaIsIframe() {\n\t\t\treturn state.initEpisode?.media?.type === \"IFRAME\";\n\t\t},\n\t\tget mediaIsVideo() {\n\t\t\treturn state.initEpisode?.media?.type === \"VIDEO\";\n\t\t},\n\t\tget mediaIsAudio() {\n\t\t\treturn state.initEpisode?.media?.type === \"AUDIO\";\n\t\t},\n\t\t// Audio player state\n\t\tget playedWidth() {\n\t\t\treturn `calc(${(state.currentTime / state.duration) * 100}% -  0.25rem)`;\n\t\t},\n\t\tget thumbLeft() {\n\t\t\treturn `calc(${(state.currentTime / state.duration) * 100}%)`;\n\t\t},\n\t\tget currentTimeHuman() {\n\t\t\treturn formatTime(\n\t\t\t\tparseTime(state.currentTime),\n\t\t\t\tparseTime(state.duration),\n\t\t\t);\n\t\t},\n\t\tget durationHuman() {\n\t\t\treturn formatTime(parseTime(state.duration));\n\t\t},\n\t\tget isPlaybackRate1x() {\n\t\t\treturn state.playbackRate === 1;\n\t\t},\n\t\tget isPlaybackRate1_5x() {\n\t\t\treturn state.playbackRate === 1.5;\n\t\t},\n\t\tget isPlaybackRate2x() {\n\t\t\treturn state.playbackRate === 2;\n\t\t},\n\t} as TState,\n\tactions: {\n\t\t// audio player dispatchers\n\t\tdispatchPlay() {\n\t\t\tstate.playing = true;\n\t\t},\n\t\tdispatchPause() {\n\t\t\tstate.playing = false;\n\t\t},\n\t\tdispatchDurationChange() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.duration = Math.floor(playerRef?.duration || 0);\n\t\t},\n\t\tdispatchCurrentTimeChange() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.currentTime = Math.floor(playerRef?.currentTime || 0);\n\t\t},\n\n\t\t// Audio player actions\n\t\tplay() {\n\t\t\tconst { audioEpisode, playerRef } = state;\n\n\t\t\tif (audioEpisode) {\n\t\t\t\tstate.playing = true;\n\n\t\t\t\tif (\n\t\t\t\t\tplayerRef &&\n\t\t\t\t\tplayerRef.getAttribute(\"current-play\") !== audioEpisode?.id.toString()\n\t\t\t\t) {\n\t\t\t\t\tlet playbackRate = playerRef.playbackRate;\n\t\t\t\t\tplayerRef.load();\n\t\t\t\t\tplayerRef.pause();\n\t\t\t\t\tplayerRef.playbackRate = playbackRate;\n\t\t\t\t\tplayerRef.currentTime = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.isShowAudioPlayer = true;\n\t\t\tstate.isShowVideoPlayer = false;\n\t\t\tplayerRef?.play();\n\t\t\t// add a attribute to the player\n\t\t\tplayerRef?.setAttribute(\n\t\t\t\t\"current-play\",\n\t\t\t\taudioEpisode?.id.toString() || \"\",\n\t\t\t);\n\t\t},\n\t\tpause() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.pause();\n\t\t},\n\t\ttoggle() {\n\t\t\tactions.isPlaying() ? actions.pause() : actions.play();\n\t\t},\n\t\ttoggleMute() {\n\t\t\tstate.muted = !state.muted;\n\t\t},\n\t\tisPlaying() {\n\t\t\tconst { playerRef, audioEpisode } = state;\n\t\t\treturn audioEpisode\n\t\t\t\t? state.playing &&\n\t\t\t\t\t\tplayerRef?.currentSrc &&\n\t\t\t\t\t\tplayerRef.getAttribute(\"current-play\") ===\n\t\t\t\t\t\t\taudioEpisode?.id.toString()\n\t\t\t\t: state.playing;\n\t\t},\n\t\trewind10s() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\t\t\tplayerRef.currentTime += -10;\n\t\t},\n\t\tforward10s() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\t\t\tplayerRef.currentTime += 10;\n\t\t},\n\t\ttogglePlaybackRate() {\n\t\t\tconst { playerRef } = state;\n\t\t\tif (!playerRef) return;\n\n\t\t\tif (state.playbackRate === 1) {\n\t\t\t\tstate.playbackRate = 1.5;\n\t\t\t} else if (state.playbackRate === 1.5) {\n\t\t\t\tstate.playbackRate = 2;\n\t\t\t} else {\n\t\t\t\tstate.playbackRate = 1;\n\t\t\t}\n\t\t\tplayerRef.playbackRate = state.playbackRate;\n\t\t},\n\t\tforceEnd() {\n\t\t\tconst { playerRef } = state;\n\t\t\tstate.initEpisode = null;\n\t\t\tstate.playing = false;\n\t\t\tif (!playerRef) return;\n\t\t\tplayerRef.currentTime = 0;\n\t\t\tplayerRef.pause();\n\t\t\tplayerRef.setAttribute(\"current-play\", \"\");\n\t\t},\n\n\t\t// Audio player - slider\n\t\thandleSeekMouseDown() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.pause();\n\t\t},\n\t\thandleSeekChange() {\n\t\t\tconst { playerRef, sliderRef } = state;\n\t\t\tif (!playerRef?.currentSrc || !sliderRef) return;\n\t\t\tconst currentTime = playerRef.duration * parseFloat(sliderRef.value);\n\t\t\t// update the state current time\n\t\t\tstate.currentTime = Math.floor(currentTime);\n\t\t\t// Update the player's current time\n\t\t\tplayerRef.currentTime = Math.floor(currentTime);\n\t\t},\n\t\thandleSeekMouseUp() {\n\t\t\tconst { playerRef } = state;\n\t\t\tplayerRef?.play();\n\t\t},\n\n\t\t// Video <video> player actions\n\t\tvideoPlay() {\n\t\t\tconst { videoEpisode, videoPlayerRef } = state;\n\t\t\tif (videoEpisode) {\n\t\t\t\tconsole.log(111, videoPlayerRef?.currentSrc, videoEpisode.media);\n\t\t\t\tif (\n\t\t\t\t\tvideoPlayerRef &&\n\t\t\t\t\tvideoPlayerRef.getAttribute(\"current-play\") !==\n\t\t\t\t\t\tvideoEpisode?.id.toString()\n\t\t\t\t) {\n\t\t\t\t\tlet playbackRate = videoPlayerRef.playbackRate;\n\t\t\t\t\tvideoPlayerRef.load();\n\t\t\t\t\tvideoPlayerRef.pause();\n\t\t\t\t\tvideoPlayerRef.playbackRate = playbackRate;\n\t\t\t\t\tvideoPlayerRef.currentTime = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.isShowVideoPlayer = true;\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tvideoPlayerRef?.play();\n\t\t\t// add a attribute to the player\n\t\t\tvideoPlayerRef?.setAttribute(\n\t\t\t\t\"current-play\",\n\t\t\t\tvideoEpisode?.id.toString() || \"\",\n\t\t\t);\n\t\t},\n\t\tvideoPause() {\n\t\t\tconst { videoPlayerRef } = state;\n\t\t\tvideoPlayerRef?.pause();\n\t\t},\n\t\tvideoToggle() {\n\t\t\tactions.isVideoPlaying() ? actions.videoPause() : actions.videoPlay();\n\t\t},\n\t\tisVideoPlaying() {\n\t\t\tconst { videoPlayerRef, videoEpisode } = state;\n\t\t\treturn videoEpisode\n\t\t\t\t? !videoPlayerRef?.paused &&\n\t\t\t\t\t\tvideoPlayerRef?.currentSrc &&\n\t\t\t\t\t\tvideoPlayerRef.getAttribute(\"current-play\") ===\n\t\t\t\t\t\t\tvideoEpisode?.id.toString()\n\t\t\t\t: !videoPlayerRef?.paused;\n\t\t},\n\t\tforceVideoEnd() {\n\t\t\tstate.initEpisode = null;\n\n\t\t\tif (state.videoPlayerRef) {\n\t\t\t\tstate.videoPlayerRef.currentTime = 0;\n\t\t\t\tstate.videoPlayerRef.pause();\n\t\t\t\tstate.videoPlayerRef.setAttribute(\"current-play\", \"\");\n\t\t\t}\n\t\t},\n\n\t\t// Video Iframe <iframe> player actions\n\t\tvideoIframePlay() {\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tstate.isShowVideoPlayer = true;\n\t\t},\n\t\tforceVideoIframeEnd() {\n\t\t\tstate.initEpisode = null;\n\t\t},\n\n\t\t// other player actions ---\n\t\thandleClickPostMediaPlayBtn() {\n\t\t\tconst context = getContext<TContext>();\n\t\t\tconsole.log(\"click - episodeContext\", context.episodeContext);\n\n\t\t\t// check if urls is empty\n\t\t\tif (\n\t\t\t\tObject.values(context.episodeContext?.media?.urls || {}).every(\n\t\t\t\t\t(x) => !x,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tconsole.log(\"urls is empty\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (context.episodeContext?.id === state.initEpisode?.id) {\n\t\t\t\t// if the same episode, toggle the player\n\t\t\t\tif (state.mediaIsVideo) {\n\t\t\t\t\tactions.videoToggle();\n\t\t\t\t} else if (state.mediaIsIframe) {\n\t\t\t\t\tactions.videoIframePlay();\n\t\t\t\t} else if (state.mediaIsAudio) {\n\t\t\t\t\tactions.toggle();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//\n\t\t\tactions.forceEnd();\n\t\t\tactions.forceVideoEnd();\n\t\t\tactions.forceVideoIframeEnd();\n\t\t\t//\n\t\t\tstate.initEpisode = context.episodeContext || null;\n\t\t\t//\n\t\t\tconst mediaType = context.episodeContext?.media?.type;\n\n\t\t\t// play audio <audio>\n\t\t\tif (mediaType === \"AUDIO\") {\n\t\t\t\tactions.play();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// play video <video>\n\t\t\tif (mediaType === \"VIDEO\") {\n\t\t\t\tactions.videoPlay();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// play video Iframe <iframe>\n\t\t\tif (mediaType === \"IFRAME\") {\n\t\t\t\tactions.videoIframePlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\thandleCloseAllPlayer() {\n\t\t\tstate.isShowAudioPlayer = false;\n\t\t\tstate.isShowVideoPlayer = false;\n\t\t\tactions.forceEnd();\n\t\t\tactions.forceVideoEnd();\n\t\t\tactions.forceVideoIframeEnd();\n\t\t},\n\t},\n\tcallbacks: {\n\t\tonInit: () => {\n\t\t\tconst { ref } = getElement();\n\n\t\t\tstate.playerRef = ref?.querySelector(\n\t\t\t\t\"audio#ncmazfse-media-player-audio\",\n\t\t\t) as HTMLAudioElement;\n\n\t\t\tstate.sliderRef = ref?.querySelector(\n\t\t\t\t\"input#ncmazfse-media-player-audio-slider-input\",\n\t\t\t) as HTMLInputElement;\n\n\t\t\tstate.videoPlayerRef = ref?.querySelector(\n\t\t\t\t\"video#ncmazfse-media-player-video\",\n\t\t\t) as HTMLVideoElement;\n\t\t},\n\t},\n});\n\nfunction parseTime(seconds: number) {\n\tlet hours = Math.floor(seconds / 3600);\n\tlet minutes = Math.floor((seconds - hours * 3600) / 60);\n\tseconds = seconds - hours * 3600 - minutes * 60;\n\treturn [hours, minutes, seconds];\n}\n\nfunction formatTime(seconds: Array<number>, totalSeconds = seconds) {\n\tlet totalWithoutLeadingZeroes = totalSeconds.slice(\n\t\ttotalSeconds.findIndex((x) => x !== 0),\n\t);\n\treturn seconds\n\t\t.slice(seconds.length - totalWithoutLeadingZeroes.length)\n\t\t.map((x) => x.toString().padStart(2, \"0\"))\n\t\t.join(\":\");\n}\n"],"names":["store","getContext","getElement","state","actions","audioEpisode","initEpisode","media","type","videoEpisode","iframeEpisode","mediaIsIframe","mediaIsVideo","mediaIsAudio","playedWidth","currentTime","duration","thumbLeft","currentTimeHuman","formatTime","parseTime","durationHuman","isPlaybackRate1x","playbackRate","isPlaybackRate1_5x","isPlaybackRate2x","dispatchPlay","playing","dispatchPause","dispatchDurationChange","playerRef","Math","floor","dispatchCurrentTimeChange","play","getAttribute","id","toString","load","pause","isShowAudioPlayer","isShowVideoPlayer","setAttribute","toggle","isPlaying","toggleMute","muted","currentSrc","rewind10s","forward10s","togglePlaybackRate","forceEnd","handleSeekMouseDown","handleSeekChange","sliderRef","parseFloat","value","handleSeekMouseUp","videoPlay","videoPlayerRef","console","log","videoPause","videoToggle","isVideoPlaying","paused","forceVideoEnd","videoIframePlay","forceVideoIframeEnd","handleClickPostMediaPlayBtn","context","episodeContext","Object","values","urls","every","x","mediaType","handleCloseAllPlayer","callbacks","onInit","ref","querySelector","seconds","hours","minutes","totalSeconds","totalWithoutLeadingZeroes","slice","findIndex","length","map","padStart","join"],"sourceRoot":""}